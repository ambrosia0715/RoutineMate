# 🚨 긴급 수정: Firestore 데이터베이스 생성

## ❌ 현재 문제

```
Firestore 데이터베이스가 생성되지 않았습니다!
에러: The database (default) does not exist
```

앱이 실행은 되지만 **데이터가 저장되지 않고 사라집니다**.

---

## ✅ 해결 방법 (5분 소요)

### 1️⃣ Firebase Console 접속

🔗 **바로 가기**: https://console.firebase.google.com/project/routinemate-5ff74/firestore

또는:
1. https://console.firebase.google.com/ 접속
2. `routinemate-5ff74` 프로젝트 클릭
3. 좌측 메뉴에서 **"Firestore Database"** 클릭

---

### 2️⃣ 데이터베이스 만들기

페이지가 다음과 같이 보일 것입니다:

```
┌─────────────────────────────────────┐
│  Cloud Firestore                   │
│                                     │
│  데이터베이스를 만들어 시작하세요    │
│                                     │
│  [데이터베이스 만들기] 버튼         │
└─────────────────────────────────────┘
```

**"데이터베이스 만들기"** 버튼 클릭!

---

### 3️⃣ 보안 규칙 선택

2가지 옵션이 나타납니다:

#### 옵션 1: 테스트 모드 (권장 - 개발용) ✅
```
○ 프로덕션 모드
● 테스트 모드
```

**"테스트 모드에서 시작"** 선택!

이렇게 하면:
- ✅ 모든 읽기/쓰기 허용 (30일간)
- ✅ 빠른 개발 가능
- ⚠️ 나중에 보안 규칙 변경 필요

**"다음"** 클릭

---

### 4️⃣ 위치 선택

**Cloud Firestore 위치** 선택:

추천 위치 (한국 기준):
- ✅ **asia-northeast3** (서울) - **최고 권장!**
- ✅ **asia-northeast1** (도쿄)
- ✅ **asia-east1** (대만)

**중요**: 한번 선택하면 변경 불가!

**"사용 설정"** 클릭

---

### 5️⃣ 대기 (1-2분)

```
데이터베이스를 프로비저닝하는 중...
```

잠시 기다리면 완료!

---

### 6️⃣ 완료 확인

데이터베이스가 생성되면 다음 화면이 보입니다:

```
┌─────────────────────────────────────┐
│  Cloud Firestore                   │
│  ┌───────┬─────┬──────┐            │
│  │ 데이터 │ 규칙 │ 색인 │            │
│  └───────┴─────┴──────┘            │
│                                     │
│  컬렉션이 없습니다                   │
│  [컬렉션 시작] 버튼                 │
└─────────────────────────────────────┘
```

✅ **데이터베이스 생성 완료!**

---

### 7️⃣ 앱 재시작

1. **앱 완전 종료**
2. **앱 재실행**
   ```bash
   flutter run
   ```

3. **콘솔 로그 확인**
   ```
   ✅ 정상:
   📥 Firestore 데이터 수신: 0개
   
   (에러 없음!)
   ```

---

### 8️⃣ 테스트

1. **루틴 추가**
   - 제목: "첫 루틴"
   - 시작: 10:00
   - 종료: 11:00

2. **콘솔 확인**
   ```
   💾 루틴 저장 시도: 첫 루틴
   ✅ 루틴 저장 성공! ID: xxx
   📥 Firestore 데이터 수신: 1개
   📋 루틴: 첫 루틴 (ID: xxx)
   ```

3. **Firebase Console 확인**
   - Firestore Database > 데이터 탭
   - `routines` 컬렉션 생성됨
   - 문서 1개 있음

4. **앱 재시작**
   - 앱 종료 후 재실행
   - **"첫 루틴"이 여전히 보이면 성공!** 🎉

---

## 🎯 빠른 체크리스트

- [ ] Firebase Console 접속
- [ ] Firestore Database 메뉴 클릭
- [ ] "데이터베이스 만들기" 클릭
- [ ] "테스트 모드" 선택
- [ ] 위치 선택 (asia-northeast3)
- [ ] "사용 설정" 클릭
- [ ] 생성 완료 대기 (1-2분)
- [ ] 앱 재시작
- [ ] 루틴 추가 테스트
- [ ] 앱 재시작 후 데이터 유지 확인

---

## 🎊 성공 시 보이는 것

### Firebase Console:
```
routines/
  └── [자동 생성된 ID]/
      ├── title: "첫 루틴"
      ├── start: "10:00"
      ├── end: "11:00"
      └── createdAt: [타임스탬프]
```

### 앱 콘솔:
```
✅ 루틴 저장 성공! ID: abc123
📥 Firestore 데이터 수신: 1개
📋 루틴: 첫 루틴 (ID: abc123)
```

### 앱 화면:
```
┌─────────────────────────────────────┐
│  1  첫 루틴                    🗑️   │
│     ⏰ 10:00 ~ 11:00               │
└─────────────────────────────────────┘
```

---

## 📱 이제 가능한 것들

✅ 루틴 추가 → **영구 저장**
✅ 앱 종료 → **데이터 유지**
✅ 앱 재시작 → **데이터 로드**
✅ 루틴 삭제 → **즉시 반영**

---

## ⚠️ 주의사항

### 30일 후 보안 규칙 만료
테스트 모드는 30일 후 자동으로 만료됩니다.

**해결책**:
1. Firebase Console > Firestore > 규칙 탭
2. 다음 규칙으로 변경:
   ```javascript
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /routines/{routineId} {
         allow read, write: if true;
       }
     }
   }
   ```
3. "게시" 클릭

---

## 🎉 완료!

이제 **RoutineMate가 제대로 작동합니다!**

데이터가 Firebase에 안전하게 저장되고,
앱을 껐다 켜도 사라지지 않습니다! 🚀

---

**문제 계속되면**: 
1. 콘솔 전체 로그 복사
2. Firebase Console 스크린샷
3. GitHub Issue 생성
